
function extend(s,t){for(var i in t)t.hasOwnProperty(i)&&(s[i]=t[i])}Node.prototype.hasClass=function(s){return this.classList?this.classList.contains(s):-1<this.className.indexOf(s)},Node.prototype.addClass=function(s){if(this.classList)this.classList.add(s);else if(!this.hasClass(s)){var t=this.className.split(" ");t.push(s),this.className=t.join(" ")}return this},Node.prototype.removeClass=function(s){if(this.classList)this.classList.remove(s);else{var t=this.className.split(" ");t.splice(t.indexOf(s),1),this.className=t.join(" ")}return this},Number.prototype.remap=function(s,t,i,e){var a=this;return a<s&&(a=s),a>t&&(a=t),(a-s)*(e-i)/(t-s)+i};var remap=function(s,t,i,e,a){return s<t&&(s=t),s>i&&(s=i),(s-t)*(a-e)/(i-t)+e};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkVkaXRvci5qcyIsImV4dHJhcy5qcyJdLCJuYW1lcyI6WyJleHRlbmQiLCJvYmoiLCJwcm9wcyIsInByb3AiLCJoYXNPd25Qcm9wZXJ0eSIsIk5vZGUiLCJwcm90b3R5cGUiLCJoYXNDbGFzcyIsImNsYXNzTmFtZSIsInRoaXMiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImluZGV4T2YiLCJhZGRDbGFzcyIsImFkZCIsImNsYXNzZXMiLCJzcGxpdCIsInB1c2giLCJqb2luIiwicmVtb3ZlQ2xhc3MiLCJyZW1vdmUiLCJzcGxpY2UiLCJOdW1iZXIiLCJyZW1hcCIsImluX21pbiIsImluX21heCIsIm91dF9taW4iLCJvdXRfbWF4IiwieCJdLCJtYXBwaW5ncyI6IkFBQUE7QUM4Q0EsUUFBU0EsUUFBT0MsRUFBS0MsR0FDakIsSUFBSSxHQUFJQyxLQUFRRCxHQUNUQSxFQUFNRSxlQUFlRCxLQUNwQkYsRUFBSUUsR0FBUUQsRUFBTUMsSUFoRDlCRSxLQUFLQyxVQUFVQyxTQUFXLFNBQVVDLEdBQ2hDLE1BQUlDLE1BQUtDLFVBQ0VELEtBQUtDLFVBQVVDLFNBQVNILElBRXZCLEVBQUtDLEtBQUtELFVBQVVJLFFBQVFKLElBSTVDSCxLQUFLQyxVQUFVTyxTQUFXLFNBQVVMLEdBQ2hDLEdBQUlDLEtBQUtDLFVBQ0xELEtBQUtDLFVBQVVJLElBQUlOLE9BQ2hCLEtBQUtDLEtBQUtGLFNBQVNDLEdBQVksQ0FDbEMsR0FBSU8sR0FBVU4sS0FBS0QsVUFBVVEsTUFBTSxJQUNuQ0QsR0FBUUUsS0FBS1QsR0FDYkMsS0FBS0QsVUFBWU8sRUFBUUcsS0FBSyxLQUVsQyxNQUFPVCxPQUdYSixLQUFLQyxVQUFVYSxZQUFjLFNBQVVYLEdBQ25DLEdBQUlDLEtBQUtDLFVBQ0xELEtBQUtDLFVBQVVVLE9BQU9aLE9BQ25CLENBQ0gsR0FBSU8sR0FBVU4sS0FBS0QsVUFBVVEsTUFBTSxJQUNuQ0QsR0FBUU0sT0FBT04sRUFBUUgsUUFBUUosR0FBWSxHQUMzQ0MsS0FBS0QsVUFBWU8sRUFBUUcsS0FBSyxLQUVsQyxNQUFPVCxPQUlYYSxPQUFPaEIsVUFBVWlCLE1BQVEsU0FBV0MsRUFBU0MsRUFBU0MsRUFBVUMsR0FDOUQsR0FBSUMsR0FBSW5CLElBR1AsT0FGRW1CLEdBQUlKLElBQVVJLEVBQUlKLEdBQ2xCSSxFQUFJSCxJQUFVRyxFQUFJSCxJQUNYRyxFQUFJSixJQUFhRyxFQUFVRCxJQUFjRCxFQUFTRCxHQUFXRSxFQUd6RSxJQUFJSCxPQUFRLFNBQVVLLEVBQUdKLEVBQVNDLEVBQVNDLEVBQVVDLEdBR2xELE1BRkVDLEdBQUlKLElBQVVJLEVBQUlKLEdBQ2xCSSxFQUFJSCxJQUFVRyxFQUFJSCxJQUNYRyxFQUFJSixJQUFhRyxFQUFVRCxJQUFjRCxFQUFTRCxHQUFXRSIsImZpbGUiOiJUb25lLUVkaXRvci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyAoZnVuY3Rpb24oKSB7XG4vLyAgICAgdmFyIEVkaXRvciA9IHtcbi8vICAgICAgIGNvbXBvbmVudHM6IFtdLFxuLy8gICAgICAgaGFzQmVlbkluaXRpYWxpemVkOiBmYWxzZSxcbi8vICAgICAgIC8vIHRoZSBtYWluIHVzZXItZmFjaW5nIGZ1bmN0aW9uXG4vLyAgICAgICBhZGQ6IGZ1bmN0aW9uKGNvbXBvbmVudDEsIGNvbXBvbmVudDIsIGNvbXBvbmVudDMpIHtcbi8vICAgICAgICAgdmFyIGRvY3VtZW50RnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KClcbi8vICAgICAgICAgdmFyIGNvbXBvbmVudHMgPSBhcmd1bWVudHNcbi8vICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb21wb25lbnRzLmxlbmd0aDsgaSsrKSB7XG4vLyAgICAgICAgICAgY29uc29sZS5sb2coYXJndW1lbnRzW2ldKVxuLy8gICAgICAgICAgIHZhciB0aGlzQ29tcG9uZW50ID0gbmV3IENvbXBvbmVudChjb21wb25lbnRzW2ldKVxuLy8gICAgICAgICAgIEVkaXRvci5jb21wb25lbnRzLnB1c2godGhpc0NvbXBvbmVudClcbi8vICAgICAgICAgICBkb2N1bWVudEZyYWdtZW50LmFwcGVuZENoaWxkKHRoaXNDb21wb25lbnQuZWxlbWVudClcbi8vICAgICAgICAgfVxuLy8gICAgICAgICBpbmplY3RVSShkb2N1bWVudEZyYWdtZW50KVxuLy8gICAgICAgICByZXR1cm4gRWRpdG9yXG4vLyAgICAgICB9LFxuLy8gICAgICAgcmVtb3ZlOiBmdW5jdGlvbihjb21wb25lbnQpIHtcbi8vICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb21wb25lbnRzLmxlbmd0aDsgaSsrKSB7XG4vLyAgICAgICAgICAgaWYgKE9iamVjdC5pcyhjb21wb25lbnRzW2ldLCBjb21wb25lbnQpKSB7XG4vLyAgICAgICAgICAgICAvLyBkZWxldGUgRWxlbWVudFxuLy8gICAgICAgICAgICAgLy8gcmVtb3ZlIGZyb20gY29tcG9uZW50c1xuLy8gICAgICAgICAgIH1cbi8vICAgICAgICAgfVxuLy8gICAgICAgICByZXR1cm4gRWRpdG9yXG4vLyAgICAgICB9LFxuLy8gICAgICAgc2V0OiBmdW5jdGlvbihzZXR0aW5ncykge1xuLy8gICAgICAgICAvLyBhcHBseSBzZXR0aW5nc1xuLy8gICAgICAgICByZXR1cm4gRWRpdG9yXG4vLyAgICAgICB9XG4vLyAgICAgfVxuLy9cbi8vICAgICBmdW5jdGlvbiBpbml0aWFsaXplKCkge1xuLy8gICAgICAgRWRpdG9yLmNvbnRhaW5lckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuLy8gICAgICAgRWRpdG9yLmNvbnRhaW5lckVsZW1lbnQuc2V0QXR0cmlidXRlKCdpZCcsICd0b25lLWVkaXRvcl9jb250YWluZXInKVxuLy8gICAgICAgLy9pbmplY3Qgc3R5bGVcbi8vICAgICAgIC8vXG4vLyAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKEVkaXRvci5jb250YWluZXJFbGVtZW50KVxuLy8gICAgICAgRWRpdG9yLmhhc0JlZW5Jbml0aWFsaXplZCA9IHRydWVcbi8vICAgICB9XG4vL1xuLy8gICAgIC8vIGNvbnN0cnVjdG9yIGZvciBlYWNoIFVJIGNvbXBvbmVudCAob25lIHBlciBUb25lIENvbXBvbmVudClcbi8vICAgICBmdW5jdGlvbiBDb21wb25lbnQodG9uZUNvbXBvbmVudCkge1xuLy8gICAgICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jylcbi8vICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc05hbWUgPSAndG9uZS1lZGl0b3JfY29tcG9uZW50J1xuLy8gICAgICAgdGhpcy5fY29tcG9uZW50ID0gdG9uZUNvbXBvbmVudFxuLy9cbi8vICAgICAgIC8vZ2V0IHRvcCBsZXZlbCBhdHRyaWJ1dGVzXG4vLyAgICAgICB0aGlzLmNvbXBvbmVudCA9IHRvbmVDb21wb25lbnQuZ2V0KClcbi8vXG4vLyAgICAgICAvL2NyZWF0ZSBhdHRyaWJ1dGUgRE9NIGVsZW1lbnRzXG4vLyAgICAgICBmb3IgKHBhcmFtZXRlck5hbWUgaW4gdGhpcy5jb21wb25lbnQpIHtcbi8vICAgICAgICAgLy9jaGVjayBmb3IgbmVzdGVkIHBhcmFtZXRlcnNcbi8vICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmNvbXBvbmVudFtwYXJhbWV0ZXJOYW1lXSA9PT0gJ29iamVjdCcpIHtcbi8vICAgICAgICAgICB2YXIgcGFyZW50T2JqZWN0ID0gdGhpcy5jb21wb25lbnRbcGFyYW1ldGVyTmFtZV1cbi8vICAgICAgICAgICB2YXIgZ3JvdXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuLy8gICAgICAgICAgIGdyb3VwLmNsYXNzTmFtZSA9ICd0b25lLWVkaXRvcl9wYXJhbWV0ZXItZ3VpIGF0dHJpYnV0ZS1ncm91cCdcbi8vXG4vLyAgICAgICAgICAgZm9yIChwYXJhbWV0ZXJOYW1lIGluIHRoaXMuY29tcG9uZW50W3BhcmFtZXRlck5hbWVdKSB7XG4vLyAgICAgICAgICAgICBwYXJlbnRPYmplY3RbcGFyYW1ldGVyTmFtZV0gPSBuZXcgUGFyYW1ldGVyR1VJKHBhcmFtZXRlck5hbWUsIHBhcmVudE9iamVjdFtwYXJhbWV0ZXJOYW1lXSlcbi8vICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50W3BhcmFtZXRlck5hbWVdLnVwZGF0ZVZhbHVlKClcbi8vICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBhcmVudE9iamVjdFtwYXJhbWV0ZXJOYW1lXSlcbi8vICAgICAgICAgICAgIGdyb3VwLmFwcGVuZChwYXJlbnRPYmplY3RbcGFyYW1ldGVyTmFtZV0pXG4vLyAgICAgICAgICAgfVxuLy8gICAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgICAgIHRoaXMuY29tcG9uZW50W3BhcmFtZXRlck5hbWVdID0gbmV3IFBhcmFtZXRlckdVSShwYXJhbWV0ZXJOYW1lLCB0aGlzLmNvbXBvbmVudFtwYXJhbWV0ZXJOYW1lXSlcbi8vICAgICAgICAgICB0aGlzLmNvbXBvbmVudFtwYXJhbWV0ZXJOYW1lXS51cGRhdGVWYWx1ZSgpXG4vLyAgICAgICAgIH1cbi8vXG4vLyAgICAgICB9XG4vL1xuLy8gICAgIH1cbi8vXG4vLyAgICAgLy8gY29uc3RydWN0b3IgZm9yIGVhY2ggVG9uZUNvbXBvbmVudCBwYXJhbWV0ZXIgKGkuZS4gb25lIGZvciBlYWNoIEluc3RydW1lbnQgcGFyYW1ldGVyKS4gcmV0dXJucyBhbiBvYmplY3Qgd2l0aCBlbGVtZW50cyB0aGF0IGNhbiBiZSBhcHBlbmRlZCB0byBhIGRvbSBmcmFnbWVudCBhbmQgYWRkZWRcbi8vICAgICBmdW5jdGlvbiBQYXJhbWV0ZXJHVUkoYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlKSB7XG4vLyAgICAgICBjb25zb2xlLmxvZyhhdHRyaWJ1dGUpXG4vLyAgICAgICAvLyB0aGlzLlRvbmVQYXJhbSA9IGF0dHJpYnV0ZS5jb21wb25lbnRcbi8vICAgICAgIHRoaXMudHlwZSA9IGF0dHJpYnV0ZS50eXBlIHx8ICdzbGlkZXInXG4vLyAgICAgICB0aGlzLnZhbHVlID0gYXR0cmlidXRlLnZhbHVlXG4vLyAgICAgICB0aGlzLmVsZW1lbnQgPSAnPGRpdiBjbGFzcz1cInRvbmUtZWRpdG9yX3BhcmFtZXRlci1ndWknK3RoaXMudHlwZSsnXCI+PHNwYW4+Jyt0aGlzLnBhcmFtZXRlck5hbWUrJzwvc3Bhbj48c3Bhbj4nK3RoaXMudmFsdWUrJzwvc3Bhbj48L2Rpdj4nXG4vLyAgICAgICB0aGlzLnVwZGF0ZVZhbHVlID0gZnVuY3Rpb24oKSB7XG4vLyAgICAgICAgIC8vIHVwZGF0ZSB2YWx1ZSBpbiBET01cbi8vICAgICAgICAgLy8gdGhpcy5lbGVtZW50LmNoaWxkTm9kZXNbMV0uYXBwZW5kKClcbi8vICAgICAgIH1cbi8vICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc05hbWUgPSAndG9uZS1lZGl0b3JfcGFyYW1ldGVyLWd1aSAnICsgdGhpcy50eXBlXG4vLyAgICAgfVxuLy9cbi8vICAgICAvLyBtYWluIGluaXQgZnVuY3Rpb24uIGJ1aWxkcyBkb20gZWxlbWVudHMgYW5kIGluamVjdHMgdGhlbSBpbnRvIHBhZ2Vcbi8vICAgICBmdW5jdGlvbiBpbmplY3RVSShkb2N1bWVudEZyYWdtZW50KSB7XG4vLyAgICAgICBpZiAoIXRoaXMuaGFzQmVlbkluaXRpYWxpemVkKSB7XG4vLyAgICAgICAgICAgaW5pdGlhbGl6ZSgpXG4vLyAgICAgICB9XG4vLyAgICAgICBFZGl0b3IuY29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudEZyYWdtZW50KVxuLy8gICAgIH1cbi8vXG4vLyAgICAgLy9leHRyYSBiaXRzXG4vLyAgICAgZnVuY3Rpb24gaXNGdW5jdGlvbih2YWwpIHtcbi8vICAgICAgIHJldHVybiB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nO1xuLy8gICAgIH1cbi8vXG4vLyAgICAgZnVuY3Rpb24gZ2V0VG9uZU9iamVjdEluZm8ob2JqZWN0TmFtZSwgdGhpc1RvbmVPYmplY3QpIHtcbi8vICAgICAgIGlmICh0aGlzVG9uZU9iamVjdCBpbnN0YW5jZW9mIFRvbmUpIHtcbi8vXG4vLyAgICAgICAgIC8vIGNoZWNrIGFnYWluc3QgbWFueSBUb25lIENsYXNzZXNcbi8vICAgICAgICAgdmFyIHRvbmVDbGFzc2VzID0geyAvL2NvcGllZCBmcm9tIGRvY3Ncbi8vICAgICAgICAgICBJbnN0cnVtZW50OiB7XG4vLyAgICAgICAgICAgICBiYXNlQ2xhc3M6IFRvbmUuSW5zdHJ1bWVudCxcbi8vICAgICAgICAgICAgIGNsYXNzZXM6IFtcIkFNU3ludGhcIiwgXCJEdW9TeW50aFwiLCBcIkZNU3ludGhcIiwgXCJJbnN0cnVtZW50XCIsIFwiTWVtYnJhbmVTeW50aFwiLCBcIk1ldGFsU3ludGhcIiwgXCJNb25vU3ludGhcIiwgXCJNb25vcGhvbmljXCIsIFwiTm9pc2VTeW50aFwiLCBcIlBsdWNrU3ludGhcIiwgXCJQb2x5U3ludGhcIiwgXCJTYW1wbGVyXCIsIFwiU3ludGhcIl0sXG4vLyAgICAgICAgICAgfSxcbi8vICAgICAgICAgICBFZmZlY3Q6IHtcbi8vICAgICAgICAgICAgIGJhc2VDbGFzczogVG9uZS5FZmZlY3QsXG4vLyAgICAgICAgICAgICBjbGFzc2VzOiBbXCJBdXRvRmlsdGVyXCIsIFwiQXV0b1Bhbm5lclwiLCBcIkF1dG9XYWhcIiwgXCJCaXRDcnVzaGVyXCIsIFwiQ2hlYnlzaGV2XCIsIFwiQ2hvcnVzXCIsIFwiQ29udm9sdmVyXCIsIFwiRGlzdG9ydGlvblwiLCBcIkVmZmVjdFwiLCBcIkZlZWRiYWNrRGVsYXlcIiwgXCJGZWVkYmFja0VmZmVjdFwiLCBcIkZyZWV2ZXJiXCIsIFwiSkNSZXZlcmJcIiwgXCJNaWRTaWRlRWZmZWN0XCIsIFwiUGhhc2VyXCIsIFwiUGluZ1BvbmdEZWxheVwiLCBcIlBpdGNoU2hpZnRcIiwgXCJTdGVyZW9FZmZlY3RcIiwgXCJTdGVyZW9GZWVkYmFja0VmZmVjdFwiLCBcIlN0ZXJlb1dpZGVuZXJcIiwgXCJTdGVyZW9YRmVlZGJhY2tFZmZlY3RcIiwgXCJUcmVtb2xvXCIsIFwiVmlicmF0b1wiXSxcbi8vICAgICAgICAgICB9LFxuLy8gICAgICAgICAgIFNvdXJjZToge1xuLy8gICAgICAgICAgICAgYmFzZUNsYXNzOiBUb25lLlNvdXJjZSxcbi8vICAgICAgICAgICAgIGNsYXNzZXM6IFtcIkFNT3NjaWxsYXRvclwiLCBcIkJ1ZmZlclNvdXJjZVwiLCBcIkZNT3NjaWxsYXRvclwiLCBcIkZhdE9zY2lsbGF0b3JcIiwgXCJHcmFpblBsYXllclwiLCBcIk11bHRpUGxheWVyXCIsIFwiTm9pc2VcIiwgXCJPbW5pT3NjaWxsYXRvclwiLCBcIk9zY2lsbGF0b3JcIiwgXCJQV01Pc2NpbGxhdG9yXCIsIFwiUGxheWVyXCIsIFwiUHVsc2VPc2NpbGxhdG9yXCIsIFwiU291cmNlXCIsIFwiVXNlck1lZGlhXCJdLFxuLy8gICAgICAgICAgIH0sXG4vLyAgICAgICAgICAgQ29yZToge1xuLy8gICAgICAgICAgICAgYmFzZUNsYXNzOiBUb25lLkNvcmUsXG4vLyAgICAgICAgICAgICBjbGFzc2VzOiBbJ0FtcGxpdHVkZUVudmVsb3BlJywgJ0FuYWx5c2VyJywgJ0NvbXByZXNzb3InLCAnQ3Jvc3NGYWRlJywgJ0VRMycsICdFbnZlbG9wZScsICdGZWVkYmFja0NvbWJGaWx0ZXInLCAnRmlsdGVyJywgJ0ZvbGxvd2VyJywgJ0ZyZXF1ZW5jeUVudmVsb3BlJywgJ0dhdGUnLCAnTEZPJywgJ0xpbWl0ZXInLCAnTG93cGFzc0NvbWJGaWx0ZXInLCAnTWVyZ2UnLCAnTWV0ZXInLCAnTWlkU2lkZUNvbXByZXNzb3InLCAnTWlkU2lkZU1lcmdlJywgJ01pZFNpZGVTcGxpdCcsICdNb25vJywgJ011bHRpYmFuZENvbXByZXNzb3InLCAnTXVsdGliYW5kU3BsaXQnLCAnUGFuVm9sJywgJ1Bhbm5lcicsICdQYW5uZXIzRCcsICdTY2FsZWRFbnZlbG9wZScsICdTcGxpdCcsICdWb2x1bWUnXVxuLy8gICAgICAgICAgIH1cbi8vICAgICAgICAgfVxuLy9cbi8vICAgICAgICAgZm9yICh0b25lQ2F0ZWdvcnlOYW1lIGluIHRvbmVDbGFzc2VzKSB7XG4vLyAgICAgICAgICAgdmFyIHRvbmVDYXRlZ29yeSA9IHRvbmVDbGFzc2VzW3RvbmVDYXRlZ29yeU5hbWVdXG4vLyAgICAgICAgICAgaWYgKHRoaXNUb25lT2JqZWN0IGluc3RhbmNlb2YgdG9uZUNhdGVnb3J5LmJhc2VDbGFzcykge1xuLy8gICAgICAgICAgICAgdmFyIGluZm8gPSB7XG4vLyAgICAgICAgICAgICAgIGNhdGVnb3J5OiB0b25lQ2F0ZWdvcnlOYW1lLFxuLy8gICAgICAgICAgICAgICB0eXBlOiB0b25lQ2F0ZWdvcnlOYW1lLCAvLyBzaWduYWwsIGZ1bmN0aW9uLCBudW1iZXJcbi8vICAgICAgICAgICAgICAgLy8gIHZhbHVlOiB0aGlzVG9uZU9iamVjdC5nZXQoKVxuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b25lQ2F0ZWdvcnkuY2xhc3Nlcy5sZW5ndGg7IGkrKykge1xuLy8gICAgICAgICAgICAgICBpZiAodGhpc1RvbmVPYmplY3QgaW5zdGFuY2VvZiBUb25lW3RvbmVDYXRlZ29yeS5jbGFzc2VzW2ldXSkgdmFsdWUudHlwZSA9IHRvbmVDYXRlZ29yeS5jbGFzc2VzW2ldXG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzVG9uZU9iamVjdC5nZXQoKVxuLy8gICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicpIHtcbi8vICAgICAgICAgICAgICAgZm9yIChwcm9wZXJ0eU5hbWUgaW4gdGhpc1RvbmVPYmplY3QpIHtcbi8vICAgICAgICAgICAgICAgICAvLyByZWN1cnNpdmUsIGhvbGQgb24gdG8gdXIgaGF0XG4vLyAgICAgICAgICAgICAgICAgdmFsdWUgPSBnZXRUb25lT2JqZWN0SW5mbyhwcm9wZXJ0eU5hbWUsIHRoaXNUb25lT2JqZWN0W3Byb3BlcnR5TmFtZV0pXG4vLyAgICAgICAgICAgICAgIH1cbi8vICAgICAgICAgICAgIH1cbi8vICAgICAgICAgICAgIGluZm8udmFsdWUgPSB2YWx1ZVxuLy8gICAgICAgICAgICAgY29uc29sZS5sb2coaW5mbylcbi8vICAgICAgICAgICB9XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgcmV0dXJuIGluZm9cbi8vICAgICAgIH0gZWxzZSB7XG4vLyAgICAgICAgIHJldHVybiBmYWxzZVxuLy8gICAgICAgfVxuLy8gICAgIH1cbi8vXG4vL1xuLy8gICAgIC8vIGV4dHJhY3QgdmFsdWUgb2YgcGFyYW1ldGVyLiByZXR1cm4gdW5kZWZpbmVkIGlmIGludmFsaWRcbi8vICAgICAvLyBmdW5jdGlvbiBleHRyYWN0dGhpc1RvbmVPYmplY3QoIHBhcmFtZXRlck5hbWUsIHRoaXNUb25lT2JqZWN0ICkge1xuLy8gICAgIC8vICB2YXIgdmFsdWUgPSB7XG4vLyAgICAgLy8gICBleHBvc2U6IGZhbHNlLFxuLy8gICAgIC8vICAgdHlwZTogJycsIC8vIHNpZ25hbCwgZnVuY3Rpb24sIG51bWJlclxuLy8gICAgIC8vICAgdmFsdWU6IHVuZGVmaW5lZFxuLy8gICAgIC8vICB9XG4vLyAgICAgLy8gIGlmIChwYXJhbWV0ZXJOYW1lLmluZGV4T2YoJ18nKSAhPT0gLTEpIHtcbi8vICAgICAvLyAgIHZhbHVlID0ge1xuLy8gICAgIC8vICAgIGV4cG9zZTogZmFsc2UsXG4vLyAgICAgLy8gICAgdHlwZTogJ2ludGVybmFsJywgLy8gc2lnbmFsLCBmdW5jdGlvbiwgbnVtYmVyXG4vLyAgICAgLy8gICAgdmFsdWU6IHVuZGVmaW5lZFxuLy8gICAgIC8vICAgfVxuLy8gICAgIC8vICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24odGhpc1RvbmVPYmplY3QpKSB7XG4vLyAgICAgLy8gICB2YWx1ZSA9IHtcbi8vICAgICAvLyAgICBleHBvc2U6IGZhbHNlLFxuLy8gICAgIC8vICAgIHR5cGU6ICdGdW5jdGlvbicsIC8vIHNpZ25hbCwgZnVuY3Rpb24sIG51bWJlclxuLy8gICAgIC8vICAgIHZhbHVlOiB1bmRlZmluZWRcbi8vICAgICAvLyAgIH1cbi8vICAgICAvLyAgfSBlbHNlIGlmICh0eXBlb2YgdGhpc1RvbmVPYmplY3QgPT09ICdudW1iZXInKSB7XG4vLyAgICAgLy8gICB2YWx1ZSA9IHtcbi8vICAgICAvLyAgICBleHBvc2U6IHRydWUsXG4vLyAgICAgLy8gICAgdHlwZTogJ251bWJlcicsIC8vIHNpZ25hbCwgZnVuY3Rpb24sIG51bWJlclxuLy8gICAgIC8vICAgIHZhbHVlOiB0aGlzVG9uZU9iamVjdFxuLy8gICAgIC8vICAgfVxuLy8gICAgIC8vICB9IGVsc2UgaWYgKHRoaXNUb25lT2JqZWN0IGluc3RhbmNlb2YgVG9uZS5QYXJhbSkge1xuLy8gICAgIC8vICAgdmFsdWUgPSB7XG4vLyAgICAgLy8gICAgZXhwb3NlOiB0cnVlLFxuLy8gICAgIC8vICAgIHR5cGU6ICdQYXJhbScsIC8vIHNpZ25hbCwgZnVuY3Rpb24sIG51bWJlclxuLy8gICAgIC8vICAgIHZhbHVlOiB0aGlzVG9uZU9iamVjdC52YWx1ZSxcbi8vICAgICAvLyAgICB1bml0czogdGhpc1RvbmVPYmplY3QudW5pdHNcbi8vICAgICAvLyAgIH1cbi8vICAgICAvLyAgfSBlbHNlIGlmICh0aGlzVG9uZU9iamVjdCBpbnN0YW5jZW9mIFRvbmUuRWZmZWN0KSB7XG4vLyAgICAgLy8gICB2YWx1ZSA9IHtcbi8vICAgICAvLyAgICBleHBvc2U6IHRydWUsXG4vLyAgICAgLy8gICAgdHlwZTogJ0VmZmVjdCcsIC8vIHNpZ25hbCwgZnVuY3Rpb24sIG51bWJlclxuLy8gICAgIC8vICAgIHZhbHVlOiB0aGlzVG9uZU9iamVjdC52YWx1ZSxcbi8vICAgICAvLyAgICB1bml0czogdGhpc1RvbmVPYmplY3QudW5pdHNcbi8vICAgICAvLyAgIH1cbi8vICAgICAvLyAgfSBlbHNlIGlmICh0aGlzVG9uZU9iamVjdCBpbnN0YW5jZW9mIFRvbmUuSW5zdHJ1bWVudCkge1xuLy8gICAgIC8vICAgdmFsdWUgPSB7XG4vLyAgICAgLy8gICAgZXhwb3NlOiB0cnVlLFxuLy8gICAgIC8vICAgIHR5cGU6ICdJbnN0cnVtZW50JywgLy8gc2lnbmFsLCBmdW5jdGlvbiwgbnVtYmVyXG4vLyAgICAgLy8gICAgdmFsdWU6IHRoaXNUb25lT2JqZWN0LnZhbHVlLFxuLy8gICAgIC8vICAgIHVuaXRzOiB0aGlzVG9uZU9iamVjdC51bml0c1xuLy8gICAgIC8vICAgfVxuLy8gICAgIC8vICB9IGVsc2UgaWYgKHRoaXNUb25lT2JqZWN0IGluc3RhbmNlb2YgQXVkaW9QYXJhbSkge1xuLy8gICAgIC8vICAgdmFsdWUgPSB7XG4vLyAgICAgLy8gICAgZXhwb3NlOiB0cnVlLFxuLy8gICAgIC8vICAgIHR5cGU6ICdBdWRpb1BhcmFtJywgLy8gc2lnbmFsLCBmdW5jdGlvbiwgbnVtYmVyXG4vLyAgICAgLy8gICAgdmFsdWU6IHRoaXNUb25lT2JqZWN0LnZhbHVlXG4vLyAgICAgLy8gICB9XG4vLyAgICAgLy8gIC8vIH0gZWxzZSBpZiAodHlwZW9mIHRoaXNUb25lT2JqZWN0ID09PSAnb2JqZWN0Jyl7IC8vbm90IHNpZ25hbCBvciBhdWRpb3BhcmFtIGJ1dCBhIFRvbmUgY29tcG9uZW50XG4vLyAgICAgLy8gICAvLyB2YWx1ZSA9IHtcbi8vICAgICAvLyAgIC8vICBleHBvc2U6IHRydWUsXG4vLyAgICAgLy8gICAvLyAgdHlwZTogJ09iamVjdCcsIC8vIHNpZ25hbCwgZnVuY3Rpb24sIG51bWJlclxuLy8gICAgIC8vICAgLy8gIHZhbHVlOiB0aGlzVG9uZU9iamVjdC52YWx1ZVxuLy8gICAgIC8vICAgLy8gfVxuLy8gICAgIC8vICAgLy8gLy8gaXRlcmF0ZSBvbmUgbGF5ZXIgZGVlcGVyXG4vLyAgICAgLy8gICAvLyBmb3IgKHBhcmFtZXRlck5hbWUyIGluIHRoaXNUb25lT2JqZWN0KSB7XG4vLyAgICAgLy8gICAvLyAgaWYgKHBhcmFtZXRlcilcbi8vICAgICAvLyAgIC8vICB2YXIgbmVzdGVkVmFsdWUgPSBleHRyYWN0dGhpc1RvbmVPYmplY3QocGFyYW1ldGVyTmFtZTIsIHRoaXNUb25lT2JqZWN0W3BhcmFtZXRlck5hbWUyXSlcbi8vICAgICAvLyAgIC8vIH1cbi8vICAgICAvL1xuLy8gICAgIC8vXG4vLyAgICAgLy8gIH1cbi8vICAgICAvLyAgdmFsdWUubmFtZSA9IHBhcmFtZXRlck5hbWVcbi8vICAgICAvLyAgdmFsdWUub3JpZ2luYWxPYmplY3QgPSB0aGlzVG9uZU9iamVjdFxuLy8gICAgIC8vICBpZiAodmFsdWUudHlwZSAhPT0gJ0Z1bmN0aW9uJykgY29uc29sZS5sb2codmFsdWUpXG4vLyAgICAgLy8gIHJldHVybiB2YWx1ZVxuLy8gICAgIC8vIH1cbi8vXG4vL1xuLy8gICAgIFRvbmUuRWRpdG9yID0gRWRpdG9yXG4vLyB9KSgpXG4iLCIvLyBBREQgLyBSRU1PVkUgLyBIQVMgQ0xBU1MgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbk5vZGUucHJvdG90eXBlLmhhc0NsYXNzID0gZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xuICAgIGlmICh0aGlzLmNsYXNzTGlzdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gKC0xIDwgdGhpcy5jbGFzc05hbWUuaW5kZXhPZihjbGFzc05hbWUpKTtcbiAgICB9XG59O1xuXG5Ob2RlLnByb3RvdHlwZS5hZGRDbGFzcyA9IGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcbiAgICBpZiAodGhpcy5jbGFzc0xpc3QpIHtcbiAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gICAgfSBlbHNlIGlmICghdGhpcy5oYXNDbGFzcyhjbGFzc05hbWUpKSB7XG4gICAgICAgIHZhciBjbGFzc2VzID0gdGhpcy5jbGFzc05hbWUuc3BsaXQoXCIgXCIpO1xuICAgICAgICBjbGFzc2VzLnB1c2goY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy5jbGFzc05hbWUgPSBjbGFzc2VzLmpvaW4oXCIgXCIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbk5vZGUucHJvdG90eXBlLnJlbW92ZUNsYXNzID0gZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xuICAgIGlmICh0aGlzLmNsYXNzTGlzdCkge1xuICAgICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgY2xhc3NlcyA9IHRoaXMuY2xhc3NOYW1lLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgY2xhc3Nlcy5zcGxpY2UoY2xhc3Nlcy5pbmRleE9mKGNsYXNzTmFtZSksIDEpO1xuICAgICAgICB0aGlzLmNsYXNzTmFtZSA9IGNsYXNzZXMuam9pbihcIiBcIik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcblxuLy8gTlVNQkVSIFJFTUFQXG5OdW1iZXIucHJvdG90eXBlLnJlbWFwID0gZnVuY3Rpb24gKCBpbl9taW4gLCBpbl9tYXggLCBvdXRfbWluICwgb3V0X21heCApIHtcbiAgdmFyIHggPSB0aGlzXG5cdGlmICh4IDwgaW5fbWluKSB7IHggPSBpbl9taW4gfVxuXHRpZiAoeCA+IGluX21heCkgeyB4ID0gaW5fbWF4IH1cbiAgXHRyZXR1cm4gKCB4IC0gaW5fbWluICkgKiAoIG91dF9tYXggLSBvdXRfbWluICkgLyAoIGluX21heCAtIGluX21pbiApICsgb3V0X21pbjtcbn1cblxudmFyIHJlbWFwID0gZnVuY3Rpb24gKHgsIGluX21pbiAsIGluX21heCAsIG91dF9taW4gLCBvdXRfbWF4ICkge1xuXHRpZiAoeCA8IGluX21pbikgeyB4ID0gaW5fbWluIH1cblx0aWYgKHggPiBpbl9tYXgpIHsgeCA9IGluX21heCB9XG4gIFx0cmV0dXJuICggeCAtIGluX21pbiApICogKCBvdXRfbWF4IC0gb3V0X21pbiApIC8gKCBpbl9tYXggLSBpbl9taW4gKSArIG91dF9taW47XG59XG5cblxuZnVuY3Rpb24gZXh0ZW5kKG9iaiwgcHJvcHMpIHtcbiAgICBmb3IodmFyIHByb3AgaW4gcHJvcHMpIHtcbiAgICAgICAgaWYocHJvcHMuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgICAgIG9ialtwcm9wXSA9IHByb3BzW3Byb3BdO1xuICAgICAgICB9XG4gICAgfVxufVxuIl19
