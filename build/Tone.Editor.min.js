!function(){function e(){r.containerElement=document.createElement("div"),r.containerElement.setAttribute("id","tone-editor_container"),document.body.appendChild(r.containerElement),r.hasBeenInitialized=!0}function t(e){this.element=document.createElement("div"),this.element.className="tone-editor_component",this.toneComponent=e,this.flattenedComponent=e.get(),this.parameters=[];var t={};for(parameterName in this.toneComponent)t[parameterName]=o(parameterName,this.toneComponent[parameterName]);console.log(t)}function n(t){this.hasBeenInitialized||e(),r.containerElement.appendChild(t)}function o(e,t){if(t instanceof Tone){var n={Instrument:{baseClass:Tone.Instrument,classes:["AMSynth","DuoSynth","FMSynth","Instrument","MembraneSynth","MetalSynth","MonoSynth","Monophonic","NoiseSynth","PluckSynth","PolySynth","Sampler","Synth"]},Effect:{baseClass:Tone.Effect,classes:["AutoFilter","AutoPanner","AutoWah","BitCrusher","Chebyshev","Chorus","Convolver","Distortion","Effect","FeedbackDelay","FeedbackEffect","Freeverb","JCReverb","MidSideEffect","Phaser","PingPongDelay","PitchShift","StereoEffect","StereoFeedbackEffect","StereoWidener","StereoXFeedbackEffect","Tremolo","Vibrato"]},Source:{baseClass:Tone.Source,classes:["AMOscillator","BufferSource","FMOscillator","FatOscillator","GrainPlayer","MultiPlayer","Noise","OmniOscillator","Oscillator","PWMOscillator","Player","PulseOscillator","Source","UserMedia"]},Core:{baseClass:Tone.Core,classes:["AmplitudeEnvelope","Analyser","Compressor","CrossFade","EQ3","Envelope","FeedbackCombFilter","Filter","Follower","FrequencyEnvelope","Gate","LFO","Limiter","LowpassCombFilter","Merge","Meter","MidSideCompressor","MidSideMerge","MidSideSplit","Mono","MultibandCompressor","MultibandSplit","PanVol","Panner","Panner3D","ScaledEnvelope","Split","Volume"]}};for(toneCategoryName in n){var r=n[toneCategoryName];if(t instanceof r.baseClass){for(var a={category:toneCategoryName,type:toneCategoryName},s=0;s<r.classes.length;s++)t instanceof Tone[r.classes[s]]&&(i.type=r.classes[s]);var i=t.get();if("number"!=typeof i)for(propertyName in t)i=o(propertyName,t[propertyName]);a.value=i,console.log(a)}}return a}return!1}var r={components:[],hasBeenInitialized:!1,add:function(e,o,a){for(var s=document.createDocumentFragment(),i=arguments,l=0;l<i.length;l++){console.log(arguments[l]);var c=new t(i[l]);r.components.push(c),s.appendChild(c.element)}return n(s),r},remove:function(e){for(var t=0;t<components.length;t++)Object.is(components[t],e);return r},set:function(e){return r}};Tone.Editor=r}();
function extend(s,t){for(var i in t)t.hasOwnProperty(i)&&(s[i]=t[i])}Node.prototype.hasClass=function(s){return this.classList?this.classList.contains(s):-1<this.className.indexOf(s)},Node.prototype.addClass=function(s){if(this.classList)this.classList.add(s);else if(!this.hasClass(s)){var t=this.className.split(" ");t.push(s),this.className=t.join(" ")}return this},Node.prototype.removeClass=function(s){if(this.classList)this.classList.remove(s);else{var t=this.className.split(" ");t.splice(t.indexOf(s),1),this.className=t.join(" ")}return this},Number.prototype.remap=function(s,t,i,e){var a=this;return a<s&&(a=s),a>t&&(a=t),(a-s)*(e-i)/(t-s)+i};var remap=function(s,t,i,e,a){return s<t&&(s=t),s>i&&(s=i),(s-t)*(a-e)/(i-t)+e};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVkaXRvci5qcyIsImV4dHJhcy5qcyJdLCJuYW1lcyI6WyJpbml0aWFsaXplIiwiRWRpdG9yIiwiY29udGFpbmVyRWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImhhc0JlZW5Jbml0aWFsaXplZCIsIkNvbXBvbmVudCIsInRvbmVDb21wb25lbnQiLCJ0aGlzIiwiZWxlbWVudCIsImNsYXNzTmFtZSIsImZsYXR0ZW5lZENvbXBvbmVudCIsImdldCIsInBhcmFtZXRlcnMiLCJwYXJhbXMiLCJwYXJhbWV0ZXJOYW1lIiwiZ2V0VG9uZU9iamVjdEluZm8iLCJjb25zb2xlIiwibG9nIiwiaW5qZWN0VUkiLCJkb2N1bWVudEZyYWdtZW50Iiwib2JqZWN0TmFtZSIsInRoaXNUb25lT2JqZWN0IiwiVG9uZSIsInRvbmVDbGFzc2VzIiwiSW5zdHJ1bWVudCIsImJhc2VDbGFzcyIsImNsYXNzZXMiLCJFZmZlY3QiLCJTb3VyY2UiLCJDb3JlIiwidG9uZUNhdGVnb3J5TmFtZSIsInRvbmVDYXRlZ29yeSIsImluZm8iLCJjYXRlZ29yeSIsInR5cGUiLCJpIiwibGVuZ3RoIiwidmFsdWUiLCJwcm9wZXJ0eU5hbWUiLCJjb21wb25lbnRzIiwiYWRkIiwiY29tcG9uZW50MSIsImNvbXBvbmVudDIiLCJjb21wb25lbnQzIiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImFyZ3VtZW50cyIsInRoaXNDb21wb25lbnQiLCJwdXNoIiwicmVtb3ZlIiwiY29tcG9uZW50IiwiT2JqZWN0IiwiaXMiLCJzZXQiLCJzZXR0aW5ncyIsImV4dGVuZCIsIm9iaiIsInByb3BzIiwicHJvcCIsImhhc093blByb3BlcnR5IiwiTm9kZSIsInByb3RvdHlwZSIsImhhc0NsYXNzIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJpbmRleE9mIiwiYWRkQ2xhc3MiLCJzcGxpdCIsImpvaW4iLCJyZW1vdmVDbGFzcyIsInNw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RUFBSUgsSUFBVUcsRUFBSUgsSUFDWEcsRUFBSUosSUFBYUcsRUFBVUQsSUFBY0QsRUFBU0QsR0FBV0UsRUFHekUsSUFBSUgsT0FBUSxTQUFVSyxFQUFHSixFQUFTQyxFQUFTQyxFQUFVQyxHQUdsRCxNQUZFQyxHQUFJSixJQUFVSSxFQUFJSixHQUNsQkksRUFBSUgsSUFBVUcsRUFBSUgsSUFDWEcsRUFBSUosSUFBYUcsRUFBVUQsSUFBY0QsRUFBU0QsR0FBV0UiLCJmaWxlIjoiVG9uZS5FZGl0b3IubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xuICAgIHZhciBFZGl0b3IgPSB7XG4gICAgICAgIGNvbXBvbmVudHM6IFtdLFxuICAgICAgICBoYXNCZWVuSW5pdGlhbGl6ZWQ6IGZhbHNlLFxuICAgICAgICAvLyB0aGUgbWFpbiB1c2VyLWZhY2luZyBmdW5jdGlvblxuICAgICAgICBhZGQ6IGZ1bmN0aW9uKGNvbXBvbmVudDEsIGNvbXBvbmVudDIsIGNvbXBvbmVudDMpIHtcbiAgICAgICAgICAgIHZhciBkb2N1bWVudEZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpXG4gICAgICAgICAgICB2YXIgY29tcG9uZW50cyA9IGFyZ3VtZW50c1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb21wb25lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYXJndW1lbnRzW2ldKVxuICAgICAgICAgICAgICAgIHZhciB0aGlzQ29tcG9uZW50ID0gbmV3IENvbXBvbmVudChjb21wb25lbnRzW2ldKVxuICAgICAgICAgICAgICAgIEVkaXRvci5jb21wb25lbnRzLnB1c2godGhpc0NvbXBvbmVudClcbiAgICAgICAgICAgICAgICBkb2N1bWVudEZyYWdtZW50LmFwcGVuZENoaWxkKHRoaXNDb21wb25lbnQuZWxlbWVudClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluamVjdFVJKGRvY3VtZW50RnJhZ21lbnQpXG4gICAgICAgICAgICByZXR1cm4gRWRpdG9yXG4gICAgICAgIH0sXG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24oY29tcG9uZW50KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbXBvbmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmlzKGNvbXBvbmVudHNbaV0sIGNvbXBvbmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIEVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGZyb20gY29tcG9uZW50c1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBFZGl0b3JcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbihzZXR0aW5ncykge1xuICAgICAgICAgIC8vIGFwcGx5IHNldHRpbmdzXG4gICAgICAgICAgcmV0dXJuIEVkaXRvclxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgRWRpdG9yLmNvbnRhaW5lckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICBFZGl0b3IuY29udGFpbmVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3RvbmUtZWRpdG9yX2NvbnRhaW5lcicpXG4gICAgICAgIC8vaW5qZWN0IHN0eWxlXG4gICAgICAgIC8vXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoRWRpdG9yLmNvbnRhaW5lckVsZW1lbnQpXG4gICAgICAgIEVkaXRvci5oYXNCZWVuSW5pdGlhbGl6ZWQgPSB0cnVlXG4gICAgfVxuXG4gICAgLy8gY29uc3RydWN0b3IgZm9yIGVhY2ggVUkgY29tcG9uZW50IChvbmUgcGVyIFRvbmUgQ29tcG9uZW50KVxuICAgIGZ1bmN0aW9uIENvbXBvbmVudCh0b25lQ29tcG9uZW50KSB7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc05hbWUgPSAndG9uZS1lZGl0b3JfY29tcG9uZW50J1xuICAgICAgICB0aGlzLnRvbmVDb21wb25lbnQgPSB0b25lQ29tcG9uZW50XG4gICAgICAgIC8vZ2V0IHRvcCBsZXZlbCBhdHRyaWJ1dGVzXG4gICAgICAgIHRoaXMuZmxhdHRlbmVkQ29tcG9uZW50ID0gdG9uZUNvbXBvbmVudC5nZXQoKVxuICAgICAgICB0aGlzLnBhcmFtZXRlcnMgPSBbXVxuICAgICAgICAvLyBkaXNwbGF5IHRvcCBsZXZlbCBhdHRyaWJ1dGVzXG4gICAgICAgIC8vIGZvcihwYXJhbWV0ZXJOYW1lIGluIHRoaXMuZmxhdHRlbmVkQ29tcG9uZW50KSB7XG4gICAgICAgIC8vICB2YXIgcGFyYW1ldGVyID0gdG9uZUNvbXBvbmVudFtwYXJhbWV0ZXJOYW1lXVxuICAgICAgICAvLyAgaWYgKCBleHRyYWN0ZWREYXRhLmV4cG9zZSA9PT0gdHJ1ZSApIHsgLy8gZmlsdGVyIG91dCBwYXJhbWV0ZXJzIHRoYXQgc2hvdWxkbid0IGJlIGV4cG9zZWRcbiAgICAgICAgLy8gICB2YXIgdGhpc1BhcmFtZXRlckdVSSA9IG5ldyBQYXJhbWV0ZXJHVUkoIGV4dHJhY3RlZERhdGEgKVxuICAgICAgICAvLyAgIHRoaXMucGFyYW1ldGVycy5wdXNoKCB0aGlzUGFyYW1ldGVyR1VJIClcbiAgICAgICAgLy8gICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoIHRoaXNQYXJhbWV0ZXJHVUkuZWxlbWVudCApXG4gICAgICAgIC8vICB9XG4gICAgICAgIC8vIH1cbiAgICAgICAgLy9jaGVjayBmb3Igc3ViY29tcG9uZW50c1xuICAgICAgICB2YXIgcGFyYW1zID0ge31cbiAgICAgICAgZm9yIChwYXJhbWV0ZXJOYW1lIGluIHRoaXMudG9uZUNvbXBvbmVudCkge1xuICAgICAgICAgICAgLy8gZGV0ZXJtaW5lIGlmIFRvbmVcbiAgICAgICAgICAgIHBhcmFtc1twYXJhbWV0ZXJOYW1lXSA9IGdldFRvbmVPYmplY3RJbmZvKHBhcmFtZXRlck5hbWUsIHRoaXMudG9uZUNvbXBvbmVudFtwYXJhbWV0ZXJOYW1lXSlcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhwYXJhbXMpXG4gICAgfVxuXG4gICAgLy8gY29uc3RydWN0b3IgZm9yIGVhY2ggVG9uZUNvbXBvbmVudCBwYXJhbWV0ZXIgKGkuZS4gb25lIGZvciBlYWNoIEluc3RydW1lbnQgcGFyYW1ldGVyKS4gcmV0dXJucyBhbiBvYmplY3Qgd2l0aCBlbGVtZW50cyB0aGF0IGNhbiBiZSBhcHBlbmRlZCB0byBhIGRvbSBmcmFnbWVudCBhbmQgYWRkZWRcbiAgICBmdW5jdGlvbiBQYXJhbWV0ZXJHVUkoZXh0cmFjdGVkRGF0YSkge1xuICAgICAgICB0aGlzLlRvbmVQYXJhbSA9IGV4dHJhY3RlZERhdGEub3JpZ2luYWxPYmplY3RcbiAgICAgICAgdGhpcy50eXBlID0gZXh0cmFjdGVkRGF0YS50eXBlXG4gICAgICAgIHRoaXMudmFsdWUgPSBleHRyYWN0ZWREYXRhLnZhbHVlXG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKVxuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lID0gJ3RvbmUtZWRpdG9yX3BhcmFtZXRlci1ndWkgJyArIHRoaXMudHlwZVxuICAgICAgICB2YXIgaW5uZXJUZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocGFyYW1ldGVyTmFtZSArICc6ICcgKyB0aGlzLnZhbHVlKVxuICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoaW5uZXJUZXh0KVxuICAgIH1cblxuICAgIC8vIG1haW4gaW5pdCBmdW5jdGlvbi4gYnVpbGRzIGRvbSBlbGVtZW50cyBhbmQgaW5qZWN0cyB0aGVtIGludG8gcGFnZVxuICAgIGZ1bmN0aW9uIGluamVjdFVJKGRvY3VtZW50RnJhZ21lbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmhhc0JlZW5Jbml0aWFsaXplZCkge1xuICAgICAgICAgICAgaW5pdGlhbGl6ZSgpXG4gICAgICAgIH1cbiAgICAgICAgRWRpdG9yLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnRGcmFnbWVudClcbiAgICB9XG5cbiAgICAvL2V4dHJhIGJpdHNcbiAgICBmdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRUb25lT2JqZWN0SW5mbyhvYmplY3ROYW1lLCB0aGlzVG9uZU9iamVjdCkge1xuICAgICAgICBpZiAodGhpc1RvbmVPYmplY3QgaW5zdGFuY2VvZiBUb25lKSB7XG5cbiAgICAgICAgICAgIC8vIGNoZWNrIGFnYWluc3QgbWFueSBUb25lIENsYXNzZXNcblxuICAgICAgICAgICAgdmFyIHRvbmVDbGFzc2VzID0geyAvL2NvcGllZCBmcm9tIGRvY3NcbiAgICAgICAgICAgICAgICBJbnN0cnVtZW50OiB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VDbGFzczogVG9uZS5JbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgICAgICBjbGFzc2VzOiBbXCJBTVN5bnRoXCIsIFwiRHVvU3ludGhcIiwgXCJGTVN5bnRoXCIsIFwiSW5zdHJ1bWVudFwiLCBcIk1lbWJyYW5lU3ludGhcIiwgXCJNZXRhbFN5bnRoXCIsIFwiTW9ub1N5bnRoXCIsIFwiTW9ub3Bob25pY1wiLCBcIk5vaXNlU3ludGhcIiwgXCJQbHVja1N5bnRoXCIsIFwiUG9seVN5bnRoXCIsIFwiU2FtcGxlclwiLCBcIlN5bnRoXCJdLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgRWZmZWN0OiB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VDbGFzczogVG9uZS5FZmZlY3QsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFtcIkF1dG9GaWx0ZXJcIiwgXCJBdXRvUGFubmVyXCIsIFwiQXV0b1dhaFwiLCBcIkJpdENydXNoZXJcIiwgXCJDaGVieXNoZXZcIiwgXCJDaG9ydXNcIiwgXCJDb252b2x2ZXJcIiwgXCJEaXN0b3J0aW9uXCIsIFwiRWZmZWN0XCIsIFwiRmVlZGJhY2tEZWxheVwiLCBcIkZlZWRiYWNrRWZmZWN0XCIsIFwiRnJlZXZlcmJcIiwgXCJKQ1JldmVyYlwiLCBcIk1pZFNpZGVFZmZlY3RcIiwgXCJQaGFzZXJcIiwgXCJQaW5nUG9uZ0RlbGF5XCIsIFwiUGl0Y2hTaGlmdFwiLCBcIlN0ZXJlb0VmZmVjdFwiLCBcIlN0ZXJlb0ZlZWRiYWNrRWZmZWN0XCIsIFwiU3RlcmVvV2lkZW5lclwiLCBcIlN0ZXJlb1hGZWVkYmFja0VmZmVjdFwiLCBcIlRyZW1vbG9cIiwgXCJWaWJyYXRvXCJdLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgU291cmNlOiB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VDbGFzczogVG9uZS5Tb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFtcIkFNT3NjaWxsYXRvclwiLCBcIkJ1ZmZlclNvdXJjZVwiLCBcIkZNT3NjaWxsYXRvclwiLCBcIkZhdE9zY2lsbGF0b3JcIiwgXCJHcmFpblBsYXllclwiLCBcIk11bHRpUGxheWVyXCIsIFwiTm9pc2VcIiwgXCJPbW5pT3NjaWxsYXRvclwiLCBcIk9zY2lsbGF0b3JcIiwgXCJQV01Pc2NpbGxhdG9yXCIsIFwiUGxheWVyXCIsIFwiUHVsc2VPc2NpbGxhdG9yXCIsIFwiU291cmNlXCIsIFwiVXNlck1lZGlhXCJdLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgQ29yZToge1xuICAgICAgICAgICAgICAgICAgICBiYXNlQ2xhc3M6IFRvbmUuQ29yZSxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWydBbXBsaXR1ZGVFbnZlbG9wZScsICdBbmFseXNlcicsICdDb21wcmVzc29yJywgJ0Nyb3NzRmFkZScsICdFUTMnLCAnRW52ZWxvcGUnLCAnRmVlZGJhY2tDb21iRmlsdGVyJywgJ0ZpbHRlcicsICdGb2xsb3dlcicsICdGcmVxdWVuY3lFbnZlbG9wZScsICdHYXRlJywgJ0xGTycsICdMaW1pdGVyJywgJ0xvd3Bhc3NDb21iRmlsdGVyJywgJ01lcmdlJywgJ01ldGVyJywgJ01pZFNpZGVDb21wcmVzc29yJywgJ01pZFNpZGVNZXJnZScsICdNaWRTaWRlU3BsaXQnLCAnTW9ubycsICdNdWx0aWJhbmRDb21wcmVzc29yJywgJ011bHRpYmFuZFNwbGl0JywgJ1BhblZvbCcsICdQYW5uZXInLCAnUGFubmVyM0QnLCAnU2NhbGVkRW52ZWxvcGUnLCAnU3BsaXQnLCAnVm9sdW1lJ11cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodG9uZUNhdGVnb3J5TmFtZSBpbiB0b25lQ2xhc3Nlcykge1xuICAgICAgICAgICAgICAgIHZhciB0b25lQ2F0ZWdvcnkgPSB0b25lQ2xhc3Nlc1t0b25lQ2F0ZWdvcnlOYW1lXVxuICAgICAgICAgICAgICAgIGlmICh0aGlzVG9uZU9iamVjdCBpbnN0YW5jZW9mIHRvbmVDYXRlZ29yeS5iYXNlQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZm8gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogdG9uZUNhdGVnb3J5TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHRvbmVDYXRlZ29yeU5hbWUsIC8vIHNpZ25hbCwgZnVuY3Rpb24sIG51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gIHZhbHVlOiB0aGlzVG9uZU9iamVjdC5nZXQoKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG9uZUNhdGVnb3J5LmNsYXNzZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzVG9uZU9iamVjdCBpbnN0YW5jZW9mIFRvbmVbdG9uZUNhdGVnb3J5LmNsYXNzZXNbaV1dKSB2YWx1ZS50eXBlID0gdG9uZUNhdGVnb3J5LmNsYXNzZXNbaV1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzVG9uZU9iamVjdC5nZXQoKVxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChwcm9wZXJ0eU5hbWUgaW4gdGhpc1RvbmVPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWN1cnNpdmUsIGhvbGQgb24gdG8gdXIgaGF0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBnZXRUb25lT2JqZWN0SW5mbyhwcm9wZXJ0eU5hbWUsIHRoaXNUb25lT2JqZWN0W3Byb3BlcnR5TmFtZV0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaW5mby52YWx1ZSA9IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGluZm8pXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5mb1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8vIGV4dHJhY3QgdmFsdWUgb2YgcGFyYW1ldGVyLiByZXR1cm4gdW5kZWZpbmVkIGlmIGludmFsaWRcbiAgICAvLyBmdW5jdGlvbiBleHRyYWN0dGhpc1RvbmVPYmplY3QoIHBhcmFtZXRlck5hbWUsIHRoaXNUb25lT2JqZWN0ICkge1xuICAgIC8vICB2YXIgdmFsdWUgPSB7XG4gICAgLy8gICBleHBvc2U6IGZhbHNlLFxuICAgIC8vICAgdHlwZTogJycsIC8vIHNpZ25hbCwgZnVuY3Rpb24sIG51bWJlclxuICAgIC8vICAgdmFsdWU6IHVuZGVmaW5lZFxuICAgIC8vICB9XG4gICAgLy8gIGlmIChwYXJhbWV0ZXJOYW1lLmluZGV4T2YoJ18nKSAhPT0gLTEpIHtcbiAgICAvLyAgIHZhbHVlID0ge1xuICAgIC8vICAgIGV4cG9zZTogZmFsc2UsXG4gICAgLy8gICAgdHlwZTogJ2ludGVybmFsJywgLy8gc2lnbmFsLCBmdW5jdGlvbiwgbnVtYmVyXG4gICAgLy8gICAgdmFsdWU6IHVuZGVmaW5lZFxuICAgIC8vICAgfVxuICAgIC8vICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24odGhpc1RvbmVPYmplY3QpKSB7XG4gICAgLy8gICB2YWx1ZSA9IHtcbiAgICAvLyAgICBleHBvc2U6IGZhbHNlLFxuICAgIC8vICAgIHR5cGU6ICdGdW5jdGlvbicsIC8vIHNpZ25hbCwgZnVuY3Rpb24sIG51bWJlclxuICAgIC8vICAgIHZhbHVlOiB1bmRlZmluZWRcbiAgICAvLyAgIH1cbiAgICAvLyAgfSBlbHNlIGlmICh0eXBlb2YgdGhpc1RvbmVPYmplY3QgPT09ICdudW1iZXInKSB7XG4gICAgLy8gICB2YWx1ZSA9IHtcbiAgICAvLyAgICBleHBvc2U6IHRydWUsXG4gICAgLy8gICAgdHlwZTogJ251bWJlcicsIC8vIHNpZ25hbCwgZnVuY3Rpb24sIG51bWJlclxuICAgIC8vICAgIHZhbHVlOiB0aGlzVG9uZU9iamVjdFxuICAgIC8vICAgfVxuICAgIC8vICB9IGVsc2UgaWYgKHRoaXNUb25lT2JqZWN0IGluc3RhbmNlb2YgVG9uZS5QYXJhbSkge1xuICAgIC8vICAgdmFsdWUgPSB7XG4gICAgLy8gICAgZXhwb3NlOiB0cnVlLFxuICAgIC8vICAgIHR5cGU6ICdQYXJhbScsIC8vIHNpZ25hbCwgZnVuY3Rpb24sIG51bWJlclxuICAgIC8vICAgIHZhbHVlOiB0aGlzVG9uZU9iamVjdC52YWx1ZSxcbiAgICAvLyAgICB1bml0czogdGhpc1RvbmVPYmplY3QudW5pdHNcbiAgICAvLyAgIH1cbiAgICAvLyAgfSBlbHNlIGlmICh0aGlzVG9uZU9iamVjdCBpbnN0YW5jZW9mIFRvbmUuRWZmZWN0KSB7XG4gICAgLy8gICB2YWx1ZSA9IHtcbiAgICAvLyAgICBleHBvc2U6IHRydWUsXG4gICAgLy8gICAgdHlwZTogJ0VmZmVjdCcsIC8vIHNpZ25hbCwgZnVuY3Rpb24sIG51bWJlclxuICAgIC8vICAgIHZhbHVlOiB0aGlzVG9uZU9iamVjdC52YWx1ZSxcbiAgICAvLyAgICB1bml0czogdGhpc1RvbmVPYmplY3QudW5pdHNcbiAgICAvLyAgIH1cbiAgICAvLyAgfSBlbHNlIGlmICh0aGlzVG9uZU9iamVjdCBpbnN0YW5jZW9mIFRvbmUuSW5zdHJ1bWVudCkge1xuICAgIC8vICAgdmFsdWUgPSB7XG4gICAgLy8gICAgZXhwb3NlOiB0cnVlLFxuICAgIC8vICAgIHR5cGU6ICdJbnN0cnVtZW50JywgLy8gc2lnbmFsLCBmdW5jdGlvbiwgbnVtYmVyXG4gICAgLy8gICAgdmFsdWU6IHRoaXNUb25lT2JqZWN0LnZhbHVlLFxuICAgIC8vICAgIHVuaXRzOiB0aGlzVG9uZU9iamVjdC51bml0c1xuICAgIC8vICAgfVxuICAgIC8vICB9IGVsc2UgaWYgKHRoaXNUb25lT2JqZWN0IGluc3RhbmNlb2YgQXVkaW9QYXJhbSkge1xuICAgIC8vICAgdmFsdWUgPSB7XG4gICAgLy8gICAgZXhwb3NlOiB0cnVlLFxuICAgIC8vICAgIHR5cGU6ICdBdWRpb1BhcmFtJywgLy8gc2lnbmFsLCBmdW5jdGlvbiwgbnVtYmVyXG4gICAgLy8gICAgdmFsdWU6IHRoaXNUb25lT2JqZWN0LnZhbHVlXG4gICAgLy8gICB9XG4gICAgLy8gIC8vIH0gZWxzZSBpZiAodHlwZW9mIHRoaXNUb25lT2JqZWN0ID09PSAnb2JqZWN0Jyl7IC8vbm90IHNpZ25hbCBvciBhdWRpb3BhcmFtIGJ1dCBhIFRvbmUgY29tcG9uZW50XG4gICAgLy8gICAvLyB2YWx1ZSA9IHtcbiAgICAvLyAgIC8vICBleHBvc2U6IHRydWUsXG4gICAgLy8gICAvLyAgdHlwZTogJ09iamVjdCcsIC8vIHNpZ25hbCwgZnVuY3Rpb24sIG51bWJlclxuICAgIC8vICAgLy8gIHZhbHVlOiB0aGlzVG9uZU9iamVjdC52YWx1ZVxuICAgIC8vICAgLy8gfVxuICAgIC8vICAgLy8gLy8gaXRlcmF0ZSBvbmUgbGF5ZXIgZGVlcGVyXG4gICAgLy8gICAvLyBmb3IgKHBhcmFtZXRlck5hbWUyIGluIHRoaXNUb25lT2JqZWN0KSB7XG4gICAgLy8gICAvLyAgaWYgKHBhcmFtZXRlcilcbiAgICAvLyAgIC8vICB2YXIgbmVzdGVkVmFsdWUgPSBleHRyYWN0dGhpc1RvbmVPYmplY3QocGFyYW1ldGVyTmFtZTIsIHRoaXNUb25lT2JqZWN0W3BhcmFtZXRlck5hbWUyXSlcbiAgICAvLyAgIC8vIH1cbiAgICAvL1xuICAgIC8vXG4gICAgLy8gIH1cbiAgICAvLyAgdmFsdWUubmFtZSA9IHBhcmFtZXRlck5hbWVcbiAgICAvLyAgdmFsdWUub3JpZ2luYWxPYmplY3QgPSB0aGlzVG9uZU9iamVjdFxuICAgIC8vICBpZiAodmFsdWUudHlwZSAhPT0gJ0Z1bmN0aW9uJykgY29uc29sZS5sb2codmFsdWUpXG4gICAgLy8gIHJldHVybiB2YWx1ZVxuICAgIC8vIH1cblxuXG4gICAgVG9uZS5FZGl0b3IgPSBFZGl0b3Jcbn0pKClcbiIsIi8vIEFERCAvIFJFTU9WRSAvIEhBUyBDTEFTUyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuTm9kZS5wcm90b3R5cGUuaGFzQ2xhc3MgPSBmdW5jdGlvbiAoY2xhc3NOYW1lKSB7XG4gICAgaWYgKHRoaXMuY2xhc3NMaXN0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAoLTEgPCB0aGlzLmNsYXNzTmFtZS5pbmRleE9mKGNsYXNzTmFtZSkpO1xuICAgIH1cbn07XG5cbk5vZGUucHJvdG90eXBlLmFkZENsYXNzID0gZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xuICAgIGlmICh0aGlzLmNsYXNzTGlzdCkge1xuICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmhhc0NsYXNzKGNsYXNzTmFtZSkpIHtcbiAgICAgICAgdmFyIGNsYXNzZXMgPSB0aGlzLmNsYXNzTmFtZS5zcGxpdChcIiBcIik7XG4gICAgICAgIGNsYXNzZXMucHVzaChjbGFzc05hbWUpO1xuICAgICAgICB0aGlzLmNsYXNzTmFtZSA9IGNsYXNzZXMuam9pbihcIiBcIik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcblxuTm9kZS5wcm90b3R5cGUucmVtb3ZlQ2xhc3MgPSBmdW5jdGlvbiAoY2xhc3NOYW1lKSB7XG4gICAgaWYgKHRoaXMuY2xhc3NMaXN0KSB7XG4gICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBjbGFzc2VzID0gdGhpcy5jbGFzc05hbWUuc3BsaXQoXCIgXCIpO1xuICAgICAgICBjbGFzc2VzLnNwbGljZShjbGFzc2VzLmluZGV4T2YoY2xhc3NOYW1lKSwgMSk7XG4gICAgICAgIHRoaXMuY2xhc3NOYW1lID0gY2xhc3Nlcy5qb2luKFwiIFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG4vLyBOVU1CRVIgUkVNQVBcbk51bWJlci5wcm90b3R5cGUucmVtYXAgPSBmdW5jdGlvbiAoIGluX21pbiAsIGluX21heCAsIG91dF9taW4gLCBvdXRfbWF4ICkge1xuICB2YXIgeCA9IHRoaXNcblx0aWYgKHggPCBpbl9taW4pIHsgeCA9IGluX21pbiB9XG5cdGlmICh4ID4gaW5fbWF4KSB7IHggPSBpbl9tYXggfVxuICBcdHJldHVybiAoIHggLSBpbl9taW4gKSAqICggb3V0X21heCAtIG91dF9taW4gKSAvICggaW5fbWF4IC0gaW5fbWluICkgKyBvdXRfbWluO1xufVxuXG52YXIgcmVtYXAgPSBmdW5jdGlvbiAoeCwgaW5fbWluICwgaW5fbWF4ICwgb3V0X21pbiAsIG91dF9tYXggKSB7XG5cdGlmICh4IDwgaW5fbWluKSB7IHggPSBpbl9taW4gfVxuXHRpZiAoeCA+IGluX21heCkgeyB4ID0gaW5fbWF4IH1cbiAgXHRyZXR1cm4gKCB4IC0gaW5fbWluICkgKiAoIG91dF9tYXggLSBvdXRfbWluICkgLyAoIGluX21heCAtIGluX21pbiApICsgb3V0X21pbjtcbn1cblxuXG5mdW5jdGlvbiBleHRlbmQob2JqLCBwcm9wcykge1xuICAgIGZvcih2YXIgcHJvcCBpbiBwcm9wcykge1xuICAgICAgICBpZihwcm9wcy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICAgICAgb2JqW3Byb3BdID0gcHJvcHNbcHJvcF07XG4gICAgICAgIH1cbiAgICB9XG59XG4iXX0=
