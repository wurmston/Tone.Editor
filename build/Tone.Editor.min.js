!function(){function e(){i.containerElement=document.createElement("div"),i.containerElement.setAttribute("id","tone-editor_container"),document.body.appendChild(i.containerElement),i.hasBeenInitialized=!0}function t(e){this.element=document.createElement("div"),this.element.className="tone-editor_component",this._component=e,this.component=e.get();for(parameterName in this.component)this.component[parameterName]=new n(this.component[parameterName])}function n(e){this.ToneParam=e.originalObject,this.type=e.type,this.value=e.value,this.refresh=function(){},this.element=document.createElement("p"),this.element.className="tone-editor_parameter-gui "+this.type;var t=document.createTextNode(parameterName+": "+this.value);this.element.appendChild(t)}function o(t){this.hasBeenInitialized||e(),i.containerElement.appendChild(t)}var i={components:[],hasBeenInitialized:!1,add:function(e,n,a){for(var r=document.createDocumentFragment(),m=arguments,c=0;c<m.length;c++){console.log(arguments[c]);var s=new t(m[c]);i.components.push(s),r.appendChild(s.element)}return o(r),i},remove:function(e){for(var t=0;t<components.length;t++)Object.is(components[t],e);return i},set:function(e){return i}};Tone.Editor=i}();
function extend(s,t){for(var i in t)t.hasOwnProperty(i)&&(s[i]=t[i])}Node.prototype.hasClass=function(s){return this.classList?this.classList.contains(s):-1<this.className.indexOf(s)},Node.prototype.addClass=function(s){if(this.classList)this.classList.add(s);else if(!this.hasClass(s)){var t=this.className.split(" ");t.push(s),this.className=t.join(" ")}return this},Node.prototype.removeClass=function(s){if(this.classList)this.classList.remove(s);else{var t=this.className.split(" ");t.splice(t.indexOf(s),1),this.className=t.join(" ")}return this},Number.prototype.remap=function(s,t,i,e){var a=this;return a<s&&(a=s),a>t&&(a=t),(a-s)*(e-i)/(t-s)+i};var remap=function(s,t,i,e,a){return s<t&&(s=t),s>i&&(s=i),(s-t)*(a-e)/(i-t)+e};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkVkaXRvci5qcyIsImV4dHJhcy5qcyJdLCJuYW1lcyI6WyJpbml0aWFsaXplIiwiRWRpdG9yIiwiY29udGFpbmVyRWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImhhc0JlZW5Jbml0aWFsaXplZCIsIkNvbXBvbmVudCIsInRvbmVDb21wb25lbnQiLCJ0aGlzIiwiZWxlbWVudCIsImNsYXNzTmFtZSIsIl9jb21wb25lbnQiLCJjb21wb25lbnQiLCJnZXQiLCJwYXJhbWV0ZXJOYW1lIiwiUGFyYW1ldGVyR1VJIiwiZXh0cmFjdGVkRGF0YSIsIlRvbmVQYXJhbSIsIm9yaWdpbmFsT2JqZWN0IiwidHlwZSIsInZhbHVlIiwicmVmcmVzaCIsImlubmVyVGV4dCIsImNyZWF0ZVRleHROb2RlIiwiaW5qZWN0VUkiLCJkb2N1bWVudEZyYWdtZW50IiwiY29tcG9uZW50cyIsImFkZCIsImNvbXBvbmVudDEiLCJjb21wb25lbnQyIiwiY29tcG9uZW50MyIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJhcmd1bWVudHMiLCJpIiwibGVuZ3RoIiwiY29uc29sZSIsImxvZyIsInRoaXNDb21wb25lbnQiLCJwdXNoIiwicmVtb3ZlIiwiT2JqZWN0IiwiaXMiLCJzZXQiLCJzZXR0aW5ncyIsIlRvbmUiLCJleHRlbmQiLCJvYmoiLCJwcm9wcyIsInByb3AiLCJoYXNPd25Qcm9wZXJ0eSIsIk5vZGUiLCJwcm90b3R5cGUiLCJoYXNDbGFzcyIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiaW5kZXhPZiIsImFkZENsYXNzIiwiY2xhc3NlcyIsInNwbGl0Iiwiam9pbiIsInJlbW92ZUNsYXNzIiwic3BsaWNlIiwiTnVtYmVyIiwicmVtYXAiLCJpbl9taW4iLCJpbl9tYXgiLCJvdXRfbWluIiwib3V0X21heCIsIngiXSwibWFwcGluZ3MiOiJDQUFBLFdBZ0NJLFFBQVNBLEtBQ1BDLEVBQU9DLGlCQUFt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SUgsSUFDWEcsRUFBSUosSUFBYUcsRUFBVUQsSUFBY0QsRUFBU0QsR0FBV0UsRUFHekUsSUFBSUgsT0FBUSxTQUFVSyxFQUFHSixFQUFTQyxFQUFTQyxFQUFVQyxHQUdsRCxNQUZFQyxHQUFJSixJQUFVSSxFQUFJSixHQUNsQkksRUFBSUgsSUFBVUcsRUFBSUgsSUFDWEcsRUFBSUosSUFBYUcsRUFBVUQsSUFBY0QsRUFBU0QsR0FBV0UiLCJmaWxlIjoiVG9uZS5FZGl0b3IubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xuICAgIHZhciBFZGl0b3IgPSB7XG4gICAgICBjb21wb25lbnRzOiBbXSxcbiAgICAgIGhhc0JlZW5Jbml0aWFsaXplZDogZmFsc2UsXG4gICAgICAvLyB0aGUgbWFpbiB1c2VyLWZhY2luZyBmdW5jdGlvblxuICAgICAgYWRkOiBmdW5jdGlvbihjb21wb25lbnQxLCBjb21wb25lbnQyLCBjb21wb25lbnQzKSB7XG4gICAgICAgIHZhciBkb2N1bWVudEZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpXG4gICAgICAgIHZhciBjb21wb25lbnRzID0gYXJndW1lbnRzXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29tcG9uZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGFyZ3VtZW50c1tpXSlcbiAgICAgICAgICB2YXIgdGhpc0NvbXBvbmVudCA9IG5ldyBDb21wb25lbnQoY29tcG9uZW50c1tpXSlcbiAgICAgICAgICBFZGl0b3IuY29tcG9uZW50cy5wdXNoKHRoaXNDb21wb25lbnQpXG4gICAgICAgICAgZG9jdW1lbnRGcmFnbWVudC5hcHBlbmRDaGlsZCh0aGlzQ29tcG9uZW50LmVsZW1lbnQpXG4gICAgICAgIH1cbiAgICAgICAgaW5qZWN0VUkoZG9jdW1lbnRGcmFnbWVudClcbiAgICAgICAgcmV0dXJuIEVkaXRvclxuICAgICAgfSxcbiAgICAgIHJlbW92ZTogZnVuY3Rpb24oY29tcG9uZW50KSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29tcG9uZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChPYmplY3QuaXMoY29tcG9uZW50c1tpXSwgY29tcG9uZW50KSkge1xuICAgICAgICAgICAgICAvLyBkZWxldGUgRWxlbWVudFxuICAgICAgICAgICAgICAvLyByZW1vdmUgZnJvbSBjb21wb25lbnRzXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBFZGl0b3JcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHNldHRpbmdzKSB7XG4gICAgICAgIC8vIGFwcGx5IHNldHRpbmdzXG4gICAgICAgIHJldHVybiBFZGl0b3JcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbml0aWFsaXplKCkge1xuICAgICAgRWRpdG9yLmNvbnRhaW5lckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgRWRpdG9yLmNvbnRhaW5lckVsZW1lbnQuc2V0QXR0cmlidXRlKCdpZCcsICd0b25lLWVkaXRvcl9jb250YWluZXInKVxuICAgICAgLy9pbmplY3Qgc3R5bGVcbiAgICAgIC8vXG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKEVkaXRvci5jb250YWluZXJFbGVtZW50KVxuICAgICAgRWRpdG9yLmhhc0JlZW5Jbml0aWFsaXplZCA9IHRydWVcbiAgICB9XG5cbiAgICAvLyBjb25zdHJ1Y3RvciBmb3IgZWFjaCBVSSBjb21wb25lbnQgKG9uZSBwZXIgVG9uZSBDb21wb25lbnQpXG4gICAgZnVuY3Rpb24gQ29tcG9uZW50KHRvbmVDb21wb25lbnQpIHtcbiAgICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lID0gJ3RvbmUtZWRpdG9yX2NvbXBvbmVudCdcbiAgICAgIHRoaXMuX2NvbXBvbmVudCA9IHRvbmVDb21wb25lbnRcblxuICAgICAgLy9nZXQgdG9wIGxldmVsIGF0dHJpYnV0ZXNcbiAgICAgIHRoaXMuY29tcG9uZW50ID0gdG9uZUNvbXBvbmVudC5nZXQoKVxuXG4gICAgICBmb3IgKHBhcmFtZXRlck5hbWUgaW4gdGhpcy5jb21wb25lbnQpIHtcblx0XHRcdFx0Ly8gd3JhcCBhdHRyaWJ1dGVcblx0XHRcdFx0dGhpcy5jb21wb25lbnRbcGFyYW1ldGVyTmFtZV0gPSBuZXcgUGFyYW1ldGVyR1VJKHRoaXMuY29tcG9uZW50W3BhcmFtZXRlck5hbWVdKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGNvbnN0cnVjdG9yIGZvciBlYWNoIFRvbmVDb21wb25lbnQgcGFyYW1ldGVyIChpLmUuIG9uZSBmb3IgZWFjaCBJbnN0cnVtZW50IHBhcmFtZXRlcikuIHJldHVybnMgYW4gb2JqZWN0IHdpdGggZWxlbWVudHMgdGhhdCBjYW4gYmUgYXBwZW5kZWQgdG8gYSBkb20gZnJhZ21lbnQgYW5kIGFkZGVkXG4gICAgZnVuY3Rpb24gUGFyYW1ldGVyR1VJKGV4dHJhY3RlZERhdGEpIHtcbiAgICAgIHRoaXMuVG9uZVBhcmFtID0gZXh0cmFjdGVkRGF0YS5vcmlnaW5hbE9iamVjdFxuICAgICAgdGhpcy50eXBlID0gZXh0cmFjdGVkRGF0YS50eXBlXG4gICAgICB0aGlzLnZhbHVlID0gZXh0cmFjdGVkRGF0YS52YWx1ZVxuXHRcdFx0dGhpcy5yZWZyZXNoID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdC8vIHVwZGF0ZSB2YWx1ZSBpbiBET01cblxuXHRcdFx0fVxuICAgICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXG4gICAgICB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lID0gJ3RvbmUtZWRpdG9yX3BhcmFtZXRlci1ndWkgJyArIHRoaXMudHlwZVxuICAgICAgdmFyIGlubmVyVGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHBhcmFtZXRlck5hbWUgKyAnOiAnICsgdGhpcy52YWx1ZSlcbiAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChpbm5lclRleHQpXG4gICAgfVxuXG4gICAgLy8gbWFpbiBpbml0IGZ1bmN0aW9uLiBidWlsZHMgZG9tIGVsZW1lbnRzIGFuZCBpbmplY3RzIHRoZW0gaW50byBwYWdlXG4gICAgZnVuY3Rpb24gaW5qZWN0VUkoZG9jdW1lbnRGcmFnbWVudCkge1xuICAgICAgaWYgKCF0aGlzLmhhc0JlZW5Jbml0aWFsaXplZCkge1xuICAgICAgICAgIGluaXRpYWxpemUoKVxuICAgICAgfVxuICAgICAgRWRpdG9yLmNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnRGcmFnbWVudClcbiAgICB9XG5cbiAgICAvL2V4dHJhIGJpdHNcbiAgICBmdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbic7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0VG9uZU9iamVjdEluZm8ob2JqZWN0TmFtZSwgdGhpc1RvbmVPYmplY3QpIHtcbiAgICAgIGlmICh0aGlzVG9uZU9iamVjdCBpbnN0YW5jZW9mIFRvbmUpIHtcblxuICAgICAgICAvLyBjaGVjayBhZ2FpbnN0IG1hbnkgVG9uZSBDbGFzc2VzXG4gICAgICAgIHZhciB0b25lQ2xhc3NlcyA9IHsgLy9jb3BpZWQgZnJvbSBkb2NzXG4gICAgICAgICAgSW5zdHJ1bWVudDoge1xuICAgICAgICAgICAgYmFzZUNsYXNzOiBUb25lLkluc3RydW1lbnQsXG4gICAgICAgICAgICBjbGFzc2VzOiBbXCJBTVN5bnRoXCIsIFwiRHVvU3ludGhcIiwgXCJGTVN5bnRoXCIsIFwiSW5zdHJ1bWVudFwiLCBcIk1lbWJyYW5lU3ludGhcIiwgXCJNZXRhbFN5bnRoXCIsIFwiTW9ub1N5bnRoXCIsIFwiTW9ub3Bob25pY1wiLCBcIk5vaXNlU3ludGhcIiwgXCJQbHVja1N5bnRoXCIsIFwiUG9seVN5bnRoXCIsIFwiU2FtcGxlclwiLCBcIlN5bnRoXCJdLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgRWZmZWN0OiB7XG4gICAgICAgICAgICBiYXNlQ2xhc3M6IFRvbmUuRWZmZWN0LFxuICAgICAgICAgICAgY2xhc3NlczogW1wiQXV0b0ZpbHRlclwiLCBcIkF1dG9QYW5uZXJcIiwgXCJBdXRvV2FoXCIsIFwiQml0Q3J1c2hlclwiLCBcIkNoZWJ5c2hldlwiLCBcIkNob3J1c1wiLCBcIkNvbnZvbHZlclwiLCBcIkRpc3RvcnRpb25cIiwgXCJFZmZlY3RcIiwgXCJGZWVkYmFja0RlbGF5XCIsIFwiRmVlZGJhY2tFZmZlY3RcIiwgXCJGcmVldmVyYlwiLCBcIkpDUmV2ZXJiXCIsIFwiTWlkU2lkZUVmZmVjdFwiLCBcIlBoYXNlclwiLCBcIlBpbmdQb25nRGVsYXlcIiwgXCJQaXRjaFNoaWZ0XCIsIFwiU3RlcmVvRWZmZWN0XCIsIFwiU3RlcmVvRmVlZGJhY2tFZmZlY3RcIiwgXCJTdGVyZW9XaWRlbmVyXCIsIFwiU3RlcmVvWEZlZWRiYWNrRWZmZWN0XCIsIFwiVHJlbW9sb1wiLCBcIlZpYnJhdG9cIl0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBTb3VyY2U6IHtcbiAgICAgICAgICAgIGJhc2VDbGFzczogVG9uZS5Tb3VyY2UsXG4gICAgICAgICAgICBjbGFzc2VzOiBbXCJBTU9zY2lsbGF0b3JcIiwgXCJCdWZmZXJTb3VyY2VcIiwgXCJGTU9zY2lsbGF0b3JcIiwgXCJGYXRPc2NpbGxhdG9yXCIsIFwiR3JhaW5QbGF5ZXJcIiwgXCJNdWx0aVBsYXllclwiLCBcIk5vaXNlXCIsIFwiT21uaU9zY2lsbGF0b3JcIiwgXCJPc2NpbGxhdG9yXCIsIFwiUFdNT3NjaWxsYXRvclwiLCBcIlBsYXllclwiLCBcIlB1bHNlT3NjaWxsYXRvclwiLCBcIlNvdXJjZVwiLCBcIlVzZXJNZWRpYVwiXSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIENvcmU6IHtcbiAgICAgICAgICAgIGJhc2VDbGFzczogVG9uZS5Db3JlLFxuICAgICAgICAgICAgY2xhc3NlczogWydBbXBsaXR1ZGVFbnZlbG9wZScsICdBbmFseXNlcicsICdDb21wcmVzc29yJywgJ0Nyb3NzRmFkZScsICdFUTMnLCAnRW52ZWxvcGUnLCAnRmVlZGJhY2tDb21iRmlsdGVyJywgJ0ZpbHRlcicsICdGb2xsb3dlcicsICdGcmVxdWVuY3lFbnZlbG9wZScsICdHYXRlJywgJ0xGTycsICdMaW1pdGVyJywgJ0xvd3Bhc3NDb21iRmlsdGVyJywgJ01lcmdlJywgJ01ldGVyJywgJ01pZFNpZGVDb21wcmVzc29yJywgJ01pZFNpZGVNZXJnZScsICdNaWRTaWRlU3BsaXQnLCAnTW9ubycsICdNdWx0aWJhbmRDb21wcmVzc29yJywgJ011bHRpYmFuZFNwbGl0JywgJ1BhblZvbCcsICdQYW5uZXInLCAnUGFubmVyM0QnLCAnU2NhbGVkRW52ZWxvcGUnLCAnU3BsaXQnLCAnVm9sdW1lJ11cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHRvbmVDYXRlZ29yeU5hbWUgaW4gdG9uZUNsYXNzZXMpIHtcbiAgICAgICAgICB2YXIgdG9uZUNhdGVnb3J5ID0gdG9uZUNsYXNzZXNbdG9uZUNhdGVnb3J5TmFtZV1cbiAgICAgICAgICBpZiAodGhpc1RvbmVPYmplY3QgaW5zdGFuY2VvZiB0b25lQ2F0ZWdvcnkuYmFzZUNsYXNzKSB7XG4gICAgICAgICAgICB2YXIgaW5mbyA9IHtcbiAgICAgICAgICAgICAgY2F0ZWdvcnk6IHRvbmVDYXRlZ29yeU5hbWUsXG4gICAgICAgICAgICAgIHR5cGU6IHRvbmVDYXRlZ29yeU5hbWUsIC8vIHNpZ25hbCwgZnVuY3Rpb24sIG51bWJlclxuICAgICAgICAgICAgICAvLyAgdmFsdWU6IHRoaXNUb25lT2JqZWN0LmdldCgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRvbmVDYXRlZ29yeS5jbGFzc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGlmICh0aGlzVG9uZU9iamVjdCBpbnN0YW5jZW9mIFRvbmVbdG9uZUNhdGVnb3J5LmNsYXNzZXNbaV1dKSB2YWx1ZS50eXBlID0gdG9uZUNhdGVnb3J5LmNsYXNzZXNbaV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXNUb25lT2JqZWN0LmdldCgpXG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICBmb3IgKHByb3BlcnR5TmFtZSBpbiB0aGlzVG9uZU9iamVjdCkge1xuICAgICAgICAgICAgICAgIC8vIHJlY3Vyc2l2ZSwgaG9sZCBvbiB0byB1ciBoYXRcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGdldFRvbmVPYmplY3RJbmZvKHByb3BlcnR5TmFtZSwgdGhpc1RvbmVPYmplY3RbcHJvcGVydHlOYW1lXSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5mby52YWx1ZSA9IHZhbHVlXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhpbmZvKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5mb1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuXG5cbiAgICAvLyBleHRyYWN0IHZhbHVlIG9mIHBhcmFtZXRlci4gcmV0dXJuIHVuZGVmaW5lZCBpZiBpbnZhbGlkXG4gICAgLy8gZnVuY3Rpb24gZXh0cmFjdHRoaXNUb25lT2JqZWN0KCBwYXJhbWV0ZXJOYW1lLCB0aGlzVG9uZU9iamVjdCApIHtcbiAgICAvLyAgdmFyIHZhbHVlID0ge1xuICAgIC8vICAgZXhwb3NlOiBmYWxzZSxcbiAgICAvLyAgIHR5cGU6ICcnLCAvLyBzaWduYWwsIGZ1bmN0aW9uLCBudW1iZXJcbiAgICAvLyAgIHZhbHVlOiB1bmRlZmluZWRcbiAgICAvLyAgfVxuICAgIC8vICBpZiAocGFyYW1ldGVyTmFtZS5pbmRleE9mKCdfJykgIT09IC0xKSB7XG4gICAgLy8gICB2YWx1ZSA9IHtcbiAgICAvLyAgICBleHBvc2U6IGZhbHNlLFxuICAgIC8vICAgIHR5cGU6ICdpbnRlcm5hbCcsIC8vIHNpZ25hbCwgZnVuY3Rpb24sIG51bWJlclxuICAgIC8vICAgIHZhbHVlOiB1bmRlZmluZWRcbiAgICAvLyAgIH1cbiAgICAvLyAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoaXNUb25lT2JqZWN0KSkge1xuICAgIC8vICAgdmFsdWUgPSB7XG4gICAgLy8gICAgZXhwb3NlOiBmYWxzZSxcbiAgICAvLyAgICB0eXBlOiAnRnVuY3Rpb24nLCAvLyBzaWduYWwsIGZ1bmN0aW9uLCBudW1iZXJcbiAgICAvLyAgICB2YWx1ZTogdW5kZWZpbmVkXG4gICAgLy8gICB9XG4gICAgLy8gIH0gZWxzZSBpZiAodHlwZW9mIHRoaXNUb25lT2JqZWN0ID09PSAnbnVtYmVyJykge1xuICAgIC8vICAgdmFsdWUgPSB7XG4gICAgLy8gICAgZXhwb3NlOiB0cnVlLFxuICAgIC8vICAgIHR5cGU6ICdudW1iZXInLCAvLyBzaWduYWwsIGZ1bmN0aW9uLCBudW1iZXJcbiAgICAvLyAgICB2YWx1ZTogdGhpc1RvbmVPYmplY3RcbiAgICAvLyAgIH1cbiAgICAvLyAgfSBlbHNlIGlmICh0aGlzVG9uZU9iamVjdCBpbnN0YW5jZW9mIFRvbmUuUGFyYW0pIHtcbiAgICAvLyAgIHZhbHVlID0ge1xuICAgIC8vICAgIGV4cG9zZTogdHJ1ZSxcbiAgICAvLyAgICB0eXBlOiAnUGFyYW0nLCAvLyBzaWduYWwsIGZ1bmN0aW9uLCBudW1iZXJcbiAgICAvLyAgICB2YWx1ZTogdGhpc1RvbmVPYmplY3QudmFsdWUsXG4gICAgLy8gICAgdW5pdHM6IHRoaXNUb25lT2JqZWN0LnVuaXRzXG4gICAgLy8gICB9XG4gICAgLy8gIH0gZWxzZSBpZiAodGhpc1RvbmVPYmplY3QgaW5zdGFuY2VvZiBUb25lLkVmZmVjdCkge1xuICAgIC8vICAgdmFsdWUgPSB7XG4gICAgLy8gICAgZXhwb3NlOiB0cnVlLFxuICAgIC8vICAgIHR5cGU6ICdFZmZlY3QnLCAvLyBzaWduYWwsIGZ1bmN0aW9uLCBudW1iZXJcbiAgICAvLyAgICB2YWx1ZTogdGhpc1RvbmVPYmplY3QudmFsdWUsXG4gICAgLy8gICAgdW5pdHM6IHRoaXNUb25lT2JqZWN0LnVuaXRzXG4gICAgLy8gICB9XG4gICAgLy8gIH0gZWxzZSBpZiAodGhpc1RvbmVPYmplY3QgaW5zdGFuY2VvZiBUb25lLkluc3RydW1lbnQpIHtcbiAgICAvLyAgIHZhbHVlID0ge1xuICAgIC8vICAgIGV4cG9zZTogdHJ1ZSxcbiAgICAvLyAgICB0eXBlOiAnSW5zdHJ1bWVudCcsIC8vIHNpZ25hbCwgZnVuY3Rpb24sIG51bWJlclxuICAgIC8vICAgIHZhbHVlOiB0aGlzVG9uZU9iamVjdC52YWx1ZSxcbiAgICAvLyAgICB1bml0czogdGhpc1RvbmVPYmplY3QudW5pdHNcbiAgICAvLyAgIH1cbiAgICAvLyAgfSBlbHNlIGlmICh0aGlzVG9uZU9iamVjdCBpbnN0YW5jZW9mIEF1ZGlvUGFyYW0pIHtcbiAgICAvLyAgIHZhbHVlID0ge1xuICAgIC8vICAgIGV4cG9zZTogdHJ1ZSxcbiAgICAvLyAgICB0eXBlOiAnQXVkaW9QYXJhbScsIC8vIHNpZ25hbCwgZnVuY3Rpb24sIG51bWJlclxuICAgIC8vICAgIHZhbHVlOiB0aGlzVG9uZU9iamVjdC52YWx1ZVxuICAgIC8vICAgfVxuICAgIC8vICAvLyB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzVG9uZU9iamVjdCA9PT0gJ29iamVjdCcpeyAvL25vdCBzaWduYWwgb3IgYXVkaW9wYXJhbSBidXQgYSBUb25lIGNvbXBvbmVudFxuICAgIC8vICAgLy8gdmFsdWUgPSB7XG4gICAgLy8gICAvLyAgZXhwb3NlOiB0cnVlLFxuICAgIC8vICAgLy8gIHR5cGU6ICdPYmplY3QnLCAvLyBzaWduYWwsIGZ1bmN0aW9uLCBudW1iZXJcbiAgICAvLyAgIC8vICB2YWx1ZTogdGhpc1RvbmVPYmplY3QudmFsdWVcbiAgICAvLyAgIC8vIH1cbiAgICAvLyAgIC8vIC8vIGl0ZXJhdGUgb25lIGxheWVyIGRlZXBlclxuICAgIC8vICAgLy8gZm9yIChwYXJhbWV0ZXJOYW1lMiBpbiB0aGlzVG9uZU9iamVjdCkge1xuICAgIC8vICAgLy8gIGlmIChwYXJhbWV0ZXIpXG4gICAgLy8gICAvLyAgdmFyIG5lc3RlZFZhbHVlID0gZXh0cmFjdHRoaXNUb25lT2JqZWN0KHBhcmFtZXRlck5hbWUyLCB0aGlzVG9uZU9iamVjdFtwYXJhbWV0ZXJOYW1lMl0pXG4gICAgLy8gICAvLyB9XG4gICAgLy9cbiAgICAvL1xuICAgIC8vICB9XG4gICAgLy8gIHZhbHVlLm5hbWUgPSBwYXJhbWV0ZXJOYW1lXG4gICAgLy8gIHZhbHVlLm9yaWdpbmFsT2JqZWN0ID0gdGhpc1RvbmVPYmplY3RcbiAgICAvLyAgaWYgKHZhbHVlLnR5cGUgIT09ICdGdW5jdGlvbicpIGNvbnNvbGUubG9nKHZhbHVlKVxuICAgIC8vICByZXR1cm4gdmFsdWVcbiAgICAvLyB9XG5cblxuICAgIFRvbmUuRWRpdG9yID0gRWRpdG9yXG59KSgpXG4iLCIvLyBBREQgLyBSRU1PVkUgLyBIQVMgQ0xBU1MgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbk5vZGUucHJvdG90eXBlLmhhc0NsYXNzID0gZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xuICAgIGlmICh0aGlzLmNsYXNzTGlzdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gKC0xIDwgdGhpcy5jbGFzc05hbWUuaW5kZXhPZihjbGFzc05hbWUpKTtcbiAgICB9XG59O1xuXG5Ob2RlLnByb3RvdHlwZS5hZGRDbGFzcyA9IGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcbiAgICBpZiAodGhpcy5jbGFzc0xpc3QpIHtcbiAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gICAgfSBlbHNlIGlmICghdGhpcy5oYXNDbGFzcyhjbGFzc05hbWUpKSB7XG4gICAgICAgIHZhciBjbGFzc2VzID0gdGhpcy5jbGFzc05hbWUuc3BsaXQoXCIgXCIpO1xuICAgICAgICBjbGFzc2VzLnB1c2goY2xhc3NOYW1lKTtcbiAgICAgICAgdGhpcy5jbGFzc05hbWUgPSBjbGFzc2VzLmpvaW4oXCIgXCIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn07XG5cbk5vZGUucHJvdG90eXBlLnJlbW92ZUNsYXNzID0gZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xuICAgIGlmICh0aGlzLmNsYXNzTGlzdCkge1xuICAgICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgY2xhc3NlcyA9IHRoaXMuY2xhc3NOYW1lLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgY2xhc3Nlcy5zcGxpY2UoY2xhc3Nlcy5pbmRleE9mKGNsYXNzTmFtZSksIDEpO1xuICAgICAgICB0aGlzLmNsYXNzTmFtZSA9IGNsYXNzZXMuam9pbihcIiBcIik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcblxuLy8gTlVNQkVSIFJFTUFQXG5OdW1iZXIucHJvdG90eXBlLnJlbWFwID0gZnVuY3Rpb24gKCBpbl9taW4gLCBpbl9tYXggLCBvdXRfbWluICwgb3V0X21heCApIHtcbiAgdmFyIHggPSB0aGlzXG5cdGlmICh4IDwgaW5fbWluKSB7IHggPSBpbl9taW4gfVxuXHRpZiAoeCA+IGluX21heCkgeyB4ID0gaW5fbWF4IH1cbiAgXHRyZXR1cm4gKCB4IC0gaW5fbWluICkgKiAoIG91dF9tYXggLSBvdXRfbWluICkgLyAoIGluX21heCAtIGluX21pbiApICsgb3V0X21pbjtcbn1cblxudmFyIHJlbWFwID0gZnVuY3Rpb24gKHgsIGluX21pbiAsIGluX21heCAsIG91dF9taW4gLCBvdXRfbWF4ICkge1xuXHRpZiAoeCA8IGluX21pbikgeyB4ID0gaW5fbWluIH1cblx0aWYgKHggPiBpbl9tYXgpIHsgeCA9IGluX21heCB9XG4gIFx0cmV0dXJuICggeCAtIGluX21pbiApICogKCBvdXRfbWF4IC0gb3V0X21pbiApIC8gKCBpbl9tYXggLSBpbl9taW4gKSArIG91dF9taW47XG59XG5cblxuZnVuY3Rpb24gZXh0ZW5kKG9iaiwgcHJvcHMpIHtcbiAgICBmb3IodmFyIHByb3AgaW4gcHJvcHMpIHtcbiAgICAgICAgaWYocHJvcHMuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgICAgIG9ialtwcm9wXSA9IHByb3BzW3Byb3BdO1xuICAgICAgICB9XG4gICAgfVxufVxuIl19
